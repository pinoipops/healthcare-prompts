<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Healthcare Prompts</title>
  <!-- Import Lexend Font -->
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- Include marked.js for Markdown rendering -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
  <style>
    /* General Styles */
    body {
      font-family: 'Lexend', sans-serif;
      margin: 0;
      padding: 0;
      line-height: 1.6;
      background-color: #f9f9f9;
      color: #333;
    }
    header {
      background-color: #0073e6;
      color: white;
      text-align: center;
      padding: 20px 10px;
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
    }
    main {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    h2 {
      color: #0073e6;
      font-size: 1.5rem;
      margin-bottom: 15px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin: 10px 0;
      padding: 15px;
      background: #f0f8ff;
      border-radius: 5px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    li:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    a {
      text-decoration: none;
      color: #0073e6;
      font-weight: 500;
    }
    a:hover {
      text-decoration: underline;
    }
    footer {
      text-align: center;
      padding: 10px;
      background: #0073e6;
      color: white;
    }
    .markdown-content {
      background: #f0f8ff;
      padding: 20px;
      border-radius: 5px;
      margin-top: 20px;
      outline: none; /* Remove default focus outline */
    }
    .loading {
      text-align: center;
      font-style: italic;
      color: #666;
    }
    .error {
      color: #d9534f;
      font-weight: bold;
    }
    @media (max-width: 600px) {
      header h1 {
        font-size: 1.5rem;
      }
      h2 {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Healthcare Prompts</h1>
  </header>
  <main>
    <section aria-labelledby="categories-heading">
      <h2 id="categories-heading">Browse Prompts by Category</h2>
      <ul role="navigation">
        <li><a href="#" data-md="sections/1-patient-communication.md" aria-label="Patient Communication">Patient Communication</a></li>
        <li><a href="#" data-md="sections/2-medical-documentation.md" aria-label="Medical Documentation">Medical Documentation</a></li>
        <li><a href="#" data-md="sections/3-medical-research.md" aria-label="Medical Research">Medical Research</a></li>
        <li><a href="#" data-md="sections/4-healthcare-policy-and-ethics.md" aria-label="Healthcare Policy and Ethics">Healthcare Policy and Ethics</a></li>
        <li><a href="#" data-md="sections/5-medical-education-and-training.md" aria-label="Medical Education and Training">Medical Education and Training</a></li>
        <li><a href="#" data-md="sections/6-interdisciplinary-collaboration.md" aria-label="Interdisciplinary Collaboration">Interdisciplinary Collaboration</a></li>
        <li><a href="#" data-md="sections/7-public-health-and-prevention.md" aria-label="Public Health and Prevention">Public Health and Prevention</a></li>
        <li><a href="#" data-md="sections/8-medical-practice-management.md" aria-label="Medical Practice Management">Medical Practice Management</a></li>
        <li><a href="#" data-md="sections/9-mental-health-and-wellbeing.md" aria-label="Mental Health and Wellbeing">Mental Health and Wellbeing</a></li>
        <li><a href="#" data-md="sections/10-healthcare-marketing-and-outreach.md" aria-label="Healthcare Marketing and Outreach">Healthcare Marketing and Outreach</a></li>
        <li><a href="#" data-md="sections/11-patient-privacy-and-data-security.md" aria-label="Patient Privacy and Data Security">Patient Privacy and Data Security</a></li>
        <li><a href="#" data-md="sections/12-telemedicine-and-remote-patient-care.md" aria-label="Telemedicine and Remote Patient Care">Telemedicine and Remote Patient Care</a></li>
      </ul>
      <p><a href="README.md" aria-label="View the README for more details">View the README for more details.</a></p>
    </section>
    <article id="markdown-content" class="markdown-content" tabindex="-1">
      <!-- Markdown content will be rendered here -->
    </article>
  </main>
  <footer>
    &copy; 2023 Healthcare Prompts. All rights reserved.
  </footer>
  <script>
    // Cache for storing fetched Markdown files
    const markdownCache = {};
    // Function to fetch and render Markdown content
    async function renderMarkdown(file) {
      const markdownContent = document.getElementById('markdown-content');
      markdownContent.innerHTML = '<p class="loading">Loading...</p>'; // Show loading message
      // Check if the file is already cached
      if (markdownCache[file]) {
        markdownContent.innerHTML = marked.parse(markdownCache[file]);
        scrollToContent();
        return;
      }
      try {
        const response = await fetch(file);
        if (!response.ok) {
          throw new Error(`Error fetching file: ${response.status}`);
        }
        const text = await response.text();
        // Validate the content (e.g., ensure it's not empty or incomplete)
        if (!text || text.trim().length === 0) {
          throw new Error('The file is empty or incomplete.');
        }
        markdownCache[file] = text; // Cache the fetched content
        markdownContent.innerHTML = marked.parse(text); // Render Markdown content
        // Delay focus to ensure content is fully rendered
        setTimeout(() => {
          scrollToContent();
        }, 100); // 100ms delay
      } catch (error) {
        console.error('Error loading Markdown file:', error);
        markdownContent.innerHTML = `<p class="error">Unable to load content. ${error.message}</p>`;
        scrollToContent(); // Focus even if there's an error
      }
    }
    // Function to scroll to the markdown content and set focus
    function scrollToContent() {
      const markdownContent = document.getElementById('markdown-content');
      markdownContent.scrollIntoView({ behavior: 'smooth' });
      markdownContent.focus(); // Set focus for keyboard and screen reader users
      console.log('Focus set on markdown-content'); // Debugging
    }
    // Add click event listeners to all category links
    document.querySelectorAll('a[data-md]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault(); // Prevent default link behavior
        const markdownFile = link.getAttribute('data-md'); // Get the Markdown file path
        renderMarkdown(markdownFile); // Render the Markdown content
      });
    });
  </script>
</body>
</html>